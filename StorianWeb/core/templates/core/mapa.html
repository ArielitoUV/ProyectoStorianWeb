{% extends 'core/base.html' %}
{% load static %}
{% block content %}
<script>
var map = L.map('map').setView([51.505, -0.09], 13);

L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

L.marker([51.5, -0.09]).addTo(map)
    .bindPopup('A pretty CSS popup.<br> Easily customizable.')
    .openPopup();
</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mapa con Información</title>
  <!-- Tu código del mapa -->
  <script src='https://maps.googleapis.com/maps/api/js?key=&libraries=visualization'></script>
  <script>
    function init() {
      var mapOptions = { "center": {  "lat": 56.477805862553,  "lng": -2.8674833361069 }, "clickableIcons": true, "disableDoubleClickZoom": false, "draggable": true, "fullscreenControl": true, "keyboardShortcuts": true, "mapTypeControl": true, "mapTypeControlOptions": {  "text": "Default (depends on viewport size etc.)",  "style": 0 }, "mapTypeId": "roadmap", "rotateControl": true, "scaleControl": true, "scrollwheel": true, "streetViewControl": true, "styles": false, "zoom": 3, "zoomControl": true};
      var mapElement = document.getElementById('ez-map');
      var map = new google.maps.Map(mapElement, mapOptions);
      var heatmap = new google.maps.visualization.HeatmapLayer({data: []});
      heatmap.setOptions({"dissipating":false,"opacity":0.6,"radius":2});
      heatmap.setMap(map);
      window.addEventListener("resize", function() { var center = map.getCenter(); google.maps.event.trigger(map, "resize"); map.setCenter(center); });

      // Evento para manejar el formulario
      document.getElementById('location-form').addEventListener('submit', function(event) {
        event.preventDefault(); // Evitar el envío del formulario

        // Obtener la información ingresada por el usuario
        var locationInput = document.getElementById('location-input').value;

        // Puedes utilizar la información para realizar búsquedas o mostrar detalles en la sección de información
        document.getElementById('info-section').innerHTML = '<h2>Información del Lugar</h2><p>Lugar Buscado: ' + locationInput + '</p><p>Detalles sobre lugares cercanos.</p>';
      });
    }
    window.addEventListener('load', init);
  </script>
  <style>
    #map-container { display: flex; }
    #ez-map { min-height: 420px; min-width: 150px; width: 70%; }
    #info-container { width: 30%; padding: 20px; box-sizing: border-box; }
  </style>
</head>
<body>
  <div id="map-container">
    <div id='ez-map'></div>
    <div id="info-container">
      <!-- Formulario para ingresar la información -->
      <form id="location-form">
        <label for="location-input">Lugar Buscado:</label>
        <input type="text" id="location-input" required>
        <button type="submit">Buscar</button>
      </form>

      <!-- Sección para mostrar la información -->
      <div id="info-section"></div>
    </div>
  </div>
</body>
</html>


{% endblock %}
